<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpamGuard - AI-Powered Spam Detection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: particleFloat 20s infinite linear;
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .magnetic-hover {
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .magnetic-hover:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .typing-animation {
            overflow: hidden;
            border-right: 3px solid rgba(255, 255, 255, 0.75);
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: rgba(255, 255, 255, 0.75); }
        }
        
        .floating-shield {
            animation: floatRotate 6s ease-in-out infinite;
        }
        
        @keyframes floatRotate {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }
        
        .pulse-ring {
            animation: pulseRing 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }
        
        @keyframes pulseRing {
            0% {
                transform: scale(0.33);
                opacity: 1;
            }
            80%, 100% {
                transform: scale(2.33);
                opacity: 0;
            }
        }
        
        .advanced-loading {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .advanced-loading div {
            position: absolute;
            top: 33px;
            width: 13px;
            height: 13px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            animation-timing-function: cubic-bezier(0, 1, 1, 0);
        }
        
        .advanced-loading div:nth-child(1) {
            left: 8px;
            animation: loading1 0.6s infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .advanced-loading div:nth-child(2) {
            left: 8px;
            animation: loading2 0.6s infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .advanced-loading div:nth-child(3) {
            left: 32px;
            animation: loading2 0.6s infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .advanced-loading div:nth-child(4) {
            left: 56px;
            animation: loading3 0.6s infinite;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        @keyframes loading1 {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }
        
        @keyframes loading3 {
            0% { transform: scale(1); }
            100% { transform: scale(0); }
        }
        
        @keyframes loading2 {
            0% { transform: translate(0, 0); }
            100% { transform: translate(24px, 0); }
        }
        
        .result-entrance {
            animation: resultBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes resultBounce {
            0% {
                opacity: 0;
                transform: translateY(100px) scale(0.3) rotate(-10deg);
            }
            50% {
                opacity: 1;
                transform: translateY(-10px) scale(1.05) rotate(2deg);
            }
            70% {
                transform: translateY(5px) scale(0.98) rotate(-1deg);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1) rotate(0deg);
            }
        }
        
        .confidence-meter {
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            border-radius: 10px;
            height: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.8);
            transition: width 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }
        
        .confidence-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .input-focus-effect {
            position: relative;
        }
        
        .input-focus-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .input-focus-effect:focus-within::before {
            left: 100%;
        }
        
        .icon-glow {
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
        }
        
        .btn-glow {
            box-shadow: 0 0 20px rgba(147, 51, 234, 0.3);
            transition: all 0.3s ease;
        }
        
        .btn-glow:hover {
            box-shadow: 0 0 30px rgba(147, 51, 234, 0.5);
        }
        
        .stat-counter {
            font-variant-numeric: tabular-nums;
        }
        
        .word-by-word {
            opacity: 0;
            transform: translateY(20px);
            animation: wordAppear 0.5s ease forwards;
        }
        
        @keyframes wordAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <!-- Animated Particles Background -->
    <div class="particle-bg" id="particleBg"></div>

    <!-- Main Container -->
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
        
        <!-- Floating background orbs -->
        <div class="fixed inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-10 left-10 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-10 floating-orb" style="animation: floatOrb1 8s ease-in-out infinite;"></div>
            <div class="absolute top-40 right-10 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-10 floating-orb" style="animation: floatOrb2 10s ease-in-out infinite; animation-delay: 2s;"></div>
            <div class="absolute bottom-10 left-1/3 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl opacity-10 floating-orb" style="animation: floatOrb3 12s ease-in-out infinite; animation-delay: 4s;"></div>
            <div class="absolute bottom-20 right-1/4 w-64 h-64 bg-yellow-300 rounded-full mix-blend-multiply filter blur-xl opacity-10 floating-orb" style="animation: floatOrb4 9s ease-in-out infinite; animation-delay: 1s;"></div>
        </div>

        <div class="w-full max-w-3xl">
            
            <!-- Enhanced Header -->
            <div class="text-center mb-12 animate-fade-in-up">
                <div class="relative inline-block">
                    <div class="absolute inset-0 bg-white bg-opacity-20 rounded-full blur-xl pulse-ring"></div>
                    <div class="relative inline-flex items-center justify-center w-24 h-24 bg-white bg-opacity-20 rounded-full mb-6 floating-shield">
                        <i data-lucide="shield-check" class="w-12 h-12 text-white icon-glow"></i>
                    </div>
                </div>
                
                <h1 class="text-6xl md:text-7xl font-black mb-6 gradient-text typing-animation">
                    Spam<span class="text-yellow-300">Guard</span>
                </h1>
                
                <p class="text-xl md:text-2xl text-white text-opacity-90 max-w-2xl mx-auto leading-relaxed">
                    <span class="word-by-word" style="animation-delay: 0.1s;">Advanced</span>
                    <span class="word-by-word" style="animation-delay: 0.2s;">AI-powered</span>
                    <span class="word-by-word" style="animation-delay: 0.3s;">spam detection</span>
                    <span class="word-by-word" style="animation-delay: 0.4s;">protecting</span>
                    <span class="word-by-word" style="animation-delay: 0.5s;">your digital life</span>
                </p>
                
                <!-- Stats Row -->
                <div class="flex justify-center space-x-8 mt-8">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-white stat-counter" data-target="94.7">0</div>
                        <div class="text-white text-opacity-70 text-sm">Accuracy %</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-white stat-counter" data-target="99.9">0</div>
                        <div class="text-white text-opacity-70 text-sm">Uptime %</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-white stat-counter" data-target="1000000">0</div>
                        <div class="text-white text-opacity-70 text-sm">Messages Scanned</div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Main Card -->
            <div class="glass-effect rounded-3xl shadow-2xl p-8 md:p-10 magnetic-hover hover-lift animate-slide-up" style="animation-delay: 0.3s;">
                <div class="space-y-8">
                    
                    <!-- Enhanced Message Input -->
                    <div class="space-y-3">
                        <label class="block text-lg font-bold text-white mb-4 flex items-center">
                            <i data-lucide="message-square" class="w-5 h-5 mr-3 icon-glow"></i>
                            Message Content
                            <span class="ml-auto text-sm font-normal text-white text-opacity-70">AI Analysis Ready</span>
                        </label>
                        <div class="input-focus-effect relative">
                            <textarea 
                                id="messageInput" 
                                class="w-full p-5 bg-white bg-opacity-20 border border-white border-opacity-30 rounded-2xl text-white placeholder-white placeholder-opacity-60 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 focus:border-transparent transition-all duration-500 resize-none backdrop-filter backdrop-blur-lg"
                                rows="5"
                                placeholder="Enter the message you want to analyze for spam detection. Our AI will examine content patterns, suspicious keywords, and contextual clues to determine if this message is spam or legitimate..."
                            ></textarea>
                            <div class="absolute bottom-4 right-4 text-white text-opacity-60 text-sm">
                                <span id="charCount">0</span> characters
                            </div>
                            <div class="absolute top-4 right-4">
                                <div class="w-3 h-3 bg-green-400 rounded-full pulse-ring"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Phone Number Input -->
                    <div class="space-y-3">
                        <label class="block text-lg font-bold text-white mb-4 flex items-center">
                            <i data-lucide="phone" class="w-5 h-5 mr-3 icon-glow"></i>
                            Phone Number Analysis
                            <span class="ml-auto text-sm font-normal text-white text-opacity-70">Optional</span>
                        </label>
                        <div class="input-focus-effect relative">
                            <input 
                                type="text" 
                                id="phoneInput"
                                class="w-full p-5 bg-white bg-opacity-20 border border-white border-opacity-30 rounded-2xl text-white placeholder-white placeholder-opacity-60 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 focus:border-transparent transition-all duration-500 backdrop-filter backdrop-blur-lg"
                                placeholder="Enter phone number to check reputation and spam history..."
                            >
                            <div class="absolute inset-y-0 right-0 pr-5 flex items-center">
                                <i data-lucide="smartphone" class="w-6 h-6 text-white text-opacity-50 icon-glow"></i>
                            </div>
                            <div class="absolute top-4 right-4">
                                <div class="w-3 h-3 bg-blue-400 rounded-full pulse-ring"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Analyze Button -->
                    <button 
                        id="analyzeBtn"
                        onclick="analyzeMessage()"
                        class="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-700 hover:via-pink-700 hover:to-red-700 text-white font-bold py-6 px-8 rounded-2xl transition-all duration-500 transform hover:scale-105 hover:shadow-2xl btn-glow focus:outline-none focus:ring-4 focus:ring-white focus:ring-opacity-30 text-lg relative overflow-hidden"
                    >
                        <span id="btnText" class="relative z-10">
                            <i data-lucide="search" class="w-6 h-6 inline mr-3"></i>
                            Start AI Analysis
                        </span>
                        <div class="absolute inset-0 bg-gradient-to-r from-yellow-400 via-pink-500 to-red-500 opacity-0 hover:opacity-20 transition-opacity duration-500"></div>
                    </button>

                    <!-- Advanced Loading State -->
                    <div id="loading" class="hidden text-center py-12">
                        <div class="advanced-loading mx-auto mb-6">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="space-y-2">
                            <p class="text-white text-lg font-semibold">AI Analysis in Progress...</p>
                            <p class="text-white text-opacity-70">Scanning for spam patterns and anomalies</p>
                            <div class="flex justify-center space-x-1 mt-4">
                                <div class="w-2 h-2 bg-white rounded-full animate-bounce"></div>
                                <div class="w-2 h-2 bg-white rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                                <div class="w-2 h-2 bg-white rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Results -->
                    <div id="result" class="hidden result-entrance">
                        <div class="bg-white bg-opacity-20 backdrop-filter backdrop-blur-xl rounded-3xl p-8 border border-white border-opacity-30 relative overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-br from-white to-opacity-5"></div>
                            <div class="relative z-10">
                                <div class="flex items-start space-x-6">
                                    <div id="resultIcon" class="flex-shrink-0">
                                        <div class="w-16 h-16 rounded-full flex items-center justify-center relative">
                                            <i data-lucide="" class="w-8 h-8"></i>
                                            <div class="absolute inset-0 rounded-full bg-current opacity-20 animate-ping"></div>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-3 mb-4">
                                            <h3 class="text-2xl font-bold text-black">AI Analysis Result</h3>
                                            <span id="confidenceBadge" class="px-4 py-2 rounded-full text-sm font-bold"></span>
                                        </div>
                                        
                                        <div class="space-y-4">
                                            <div class="flex items-center justify-between">
                                                <span class="text-black text-opacity-90 font-semibold">Prediction:</span>
                                                <span id="prediction" class="text-2xl font-black"></span>
                                            </div>
                                            
                                            <div class="space-y-2">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-black text-opacity-90 font-semibold">Confidence Score:</span>
                                                    <span id="confidence" class="text-lg font-bold"></span>
                                                </div>
                                                <div class="confidence-meter">
                                                    <div id="confidenceBar" class="confidence-fill" style="width: 0%"></div>
                                                </div>
                                            </div>
                                            
                                            <div class="mt-6 p-4 bg-white bg-opacity-10 rounded-2xl backdrop-filter backdrop-blur-sm">
                                                <p class="text-white text-opacity-90 font-semibold mb-2 flex items-center">
                                                    <i data-lucide="brain" class="w-4 h-4 mr-2"></i>
                                                    AI Reasoning & Analysis:
                                                </p>
                                                <p id="reason" class="text-white text-opacity-90 leading-relaxed"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Error State -->
                    <div id="error" class="hidden result-entrance">
                        <div class="bg-red-500 bg-opacity-20 backdrop-filter backdrop-blur-xl rounded-3xl p-8 border border-red-300 border-opacity-30 relative overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-br from-red-500 to-opacity-10"></div>
                            <div class="relative z-10 flex items-center space-x-4">
                                <div class="w-16 h-16 bg-red-500 bg-opacity-30 rounded-full flex items-center justify-center relative">
                                    <i data-lucide="alert-triangle" class="w-8 h-8 text-red-200"></i>
                                    <div class="absolute inset-0 rounded-full bg-red-500 opacity-20 animate-ping"></div>
                                </div>
                                <div>
                                    <h3 class="text-white font-bold text-xl mb-2">Analysis Failed</h3>
                                    <p id="errorMessage" class="text-red-100 leading-relaxed"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Footer -->
            <div class="text-center mt-12 text-white text-opacity-70 text-sm animate-fade-in-up" style="animation-delay: 0.6s;">
                <p class="mb-2">Powered by advanced machine learning & neural networks</p>
                <div class="flex justify-center space-x-4">
                    <span class="flex items-center">
                        <div class="w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"></div>
                        System Online
                    </span>
                    <span class="flex items-center">
                        <div class="w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse" style="animation-delay: 0.5s;"></div>
                        AI Engine Active
                    </span>
                    <span class="flex items-center">
                        <div class="w-2 h-2 bg-purple-400 rounded-full mr-2 animate-pulse" style="animation-delay: 1s;"></div>
                        Real-time Analysis
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Particle system
        function createParticles() {
            const particleBg = document.getElementById('particleBg');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = particle.style.height = Math.random() * 4 + 1 + 'px';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                particleBg.appendChild(particle);
            }
        }

        // Animated counters
        function animateCounters() {
            const counters = document.querySelectorAll('.stat-counter');
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const increment = target / 100;
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = target.toLocaleString();
                        clearInterval(timer);
                    } else {
                        counter.textContent = Math.floor(current).toLocaleString();
                    }
                }, 20);
            });
        }

        // Character counter
        document.getElementById('messageInput').addEventListener('input', function() {
            const count = this.value.length;
            document.getElementById('charCount').textContent = count;
            
            // Add visual feedback for long messages
            if (count > 500) {
                this.classList.add('border-yellow-400');
            } else {
                this.classList.remove('border-yellow-400');
            }
        });

        // Enhanced analyze function
        async function analyzeMessage() {
            const text = document.getElementById('messageInput').value.trim();
            const phone = document.getElementById('phoneInput').value.trim();
            const btn = document.getElementById('analyzeBtn');
            const btnText = document.getElementById('btnText');
            
            // Reset UI
            hideAllStates();
            
            // Validation
            if (!text && !phone) {
                showError('Please enter either a message or a phone number to analyze');
                return;
            }

            // Show loading with enhanced UX
            btn.disabled = true;
            btn.classList.add('opacity-75', 'cursor-not-allowed');
            btnText.innerHTML = `
                <div class="flex items-center justify-center">
                    <div class="advanced-loading w-6 h-6 mr-3">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                    Analyzing with AI...
                </div>
            `;
            document.getElementById('loading').classList.remove('hidden');

            // Simulate realistic processing time
            const processingSteps = [
                "Initializing AI models...",
                "Analyzing text patterns...",
                "Checking reputation databases...",
                "Applying neural network analysis...",
                "Generating final verdict..."
            ];

            let stepIndex = 0;
            const stepInterval = setInterval(() => {
                if (stepIndex < processingSteps.length) {
                    const loadingText = document.querySelector('#loading p');
                    if (loadingText && stepIndex < processingSteps.length - 1) {
                        loadingText.textContent = processingSteps[stepIndex];
                    }
                    stepIndex++;
                }
            }, 800);

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text, phone })
                });

                const data = await response.json();
                clearInterval(stepInterval);
                
                if (response.ok) {
                    showResult(data);
                } else {
                    throw new Error(data.error || 'Failed to analyze');
                }
            } catch (error) {
                clearInterval(stepInterval);
                showError(error.message || 'Failed to analyze. Please check your connection and try again.');
            } finally {
                // Reset button
                btn.disabled = false;
                btn.classList.remove('opacity-75', 'cursor-not-allowed');
                btnText.innerHTML = '<i data-lucide="search" class="w-6 h-6 inline mr-3"></i>Start AI Analysis';
                document.getElementById('loading').classList.add('hidden');
                
                // Re-initialize icons
                lucide.createIcons();
            }
        }

        function showResult(data) {
            const resultDiv = document.getElementById('result');
            const resultIcon = document.getElementById('resultIcon').firstElementChild;
            const resultIconI = document.getElementById('resultIcon').querySelector('i');
            const confidenceBadge = document.getElementById('confidenceBadge');
            const confidenceBar = document.getElementById('confidenceBar');
            
            // Configure result based on prediction
            if (data.prediction === 'spam') {
                resultIcon.className = 'w-16 h-16 bg-red-500 bg-opacity-40 rounded-full flex items-center justify-center relative';
                resultIconI.setAttribute('data-lucide', 'alert-octagon');
                confidenceBadge.className = 'px-4 py-2 bg-red-500 bg-opacity-40 text-red-100 rounded-full text-sm font-bold border border-red-300';
                confidenceBadge.innerHTML = '⚠️ THREAT DETECTED';
            } else {
                resultIcon.className = 'w-16 h-16 bg-green-500 bg-opacity-40 rounded-full flex items-center justify-center relative';
                resultIconI.setAttribute('data-lucide', 'check-circle');
                confidenceBadge.className = 'px-4 py-2 bg-green-500 bg-opacity-40 text-green-100 rounded-full text-sm font-bold border border-green-300';
                confidenceBadge.innerHTML = '✅ SAFE MESSAGE';
            }
            
            // Set content with animation
            document.getElementById('prediction').textContent = data.prediction.toUpperCase();
            const confidencePercent = (data.confidence * 100).toFixed(1);
            document.getElementById('confidence').textContent = confidencePercent + '%';
            
            // Animate confidence bar
            setTimeout(() => {
                confidenceBar.style.width = confidencePercent + '%';
            }, 300);
            
            document.getElementById('reason').textContent = data.reason;
            
            // Re-initialize icons and show result
            lucide.createIcons();
            resultDiv.classList.remove('hidden');
            
            // Scroll to result with smooth animation
            setTimeout(() => {
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 500);
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            document.getElementById('errorMessage').textContent = message;
            errorDiv.classList.remove('hidden');
            
            setTimeout(() => {
                errorDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 300);
        }

        function hideAllStates() {
            document.getElementById('result').classList.add('hidden');
            document.getElementById('error').classList.add('hidden');
        }

        // CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatOrb1 {
                0%, 100% { transform: translate(0, 0) rotate(0deg); }
                33% { transform: translate(30px, -30px) rotate(120deg); }
                66% { transform: translate(-20px, 20px) rotate(240deg); }
            }
            
            @keyframes floatOrb2 {
                0%, 100% { transform: translate(0, 0) rotate(0deg); }
                33% { transform: translate(-40px, 20px) rotate(120deg); }
                66% { transform: translate(20px, -40px) rotate(240deg); }
            }
            
            @keyframes floatOrb3 {
                0%, 100% { transform: translate(0, 0) rotate(0deg); }
                33% { transform: translate(20px, 30px) rotate(120deg); }
                66% { transform: translate(-30px, -20px) rotate(240deg); }
            }
            
            @keyframes floatOrb4 {
                0%, 100% { transform: translate(0, 0) rotate(0deg); }
                33% { transform: translate(-25px, -35px) rotate(120deg); }
                66% { transform: translate(35px, 25px) rotate(240deg); }
            }
            
            @keyframes animate-fade-in-up {
                from {
                    opacity: 0;
                    transform: translateY(50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            @keyframes animate-slide-up {
                from {
                    opacity: 0;
                    transform: translateY(100px) scale(0.9);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            .animate-fade-in-up {
                animation: animate-fade-in-up 1s ease-out forwards;
            }
            
            .animate-slide-up {
                animation: animate-slide-up 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            }
        `;
        document.head.appendChild(style);

        // Initialize everything when page loads
        window.addEventListener('load', () => {
            createParticles();
            animateCounters();
            
            // Stagger entrance animations
            document.querySelectorAll('.word-by-word').forEach((el, index) => {
                setTimeout(() => {
                    el.style.animationPlayState = 'running';
                }, index * 100);
            });
        });

        // Add magnetic hover effects
        document.querySelectorAll('.magnetic-hover').forEach(el => {
            el.addEventListener('mousemove', (e) => {
                const rect = el.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                
                el.style.transform = `translate(${x * 0.02}px, ${y * 0.02}px)`;
            });
            
            el.addEventListener('mouseleave', () => {
                el.style.transform = 'translate(0, 0)';
            });
        });
    </script>
</body>
</html>